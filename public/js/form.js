class DynamicForm{constructor(t,e,i={}){this.container=document.getElementById(t),this.apiUrl=`https://engage.vorsto.io/api/public/form?formId=${e}`,this.options={designColor:i.designColor||"#007bff",textColor:i.textColor||"black",backgroundColor:i.backgroundColor||"transparent",showBorder:void 0===i.showBorder||i.showBorder,showShadow:void 0===i.showShadow||i.showShadow,inputStyles:i.inputStyles||"width:100%;padding:10px;border-radius:5px;font-size:16px;",textareaStyles:i.textareaStyles||"width:100%;padding:10px;border-radius:5px;font-size:16px;height:100px;",buttonStyles:i.buttonStyles||"width:100%;padding:12px;border:none;font-size:16px;border-radius:5px;cursor:pointer;",labelStyles:i.labelStyles||"display:block;font-weight:bold;margin-bottom:5px;",fontFamily:i.fontFamily||"Arial,sans-serif"},this.fetchFormData()}async fetchFormData(){try{const t=await fetch(this.apiUrl),e=await t.json();this.renderForm(JSON.parse(e.form.data))}catch(t){console.error("Error fetching form data:",t)}}renderForm(t){if(!this.container)return void console.error("Container not found");Object.assign(this.container.style,{background:this.options.backgroundColor,fontFamily:this.options.fontFamily,padding:"20px",maxWidth:"100%",margin:"auto",color:this.options.textColor,border:this.options.showBorder?"1px solid #ccc":"none",boxShadow:this.options.showShadow?"0px 0px 10px rgba(0,0,0,0.1)":"none",borderRadius:"8px"});const e=document.createElement("form");t.questions.forEach(t=>{const i=document.createElement("div");i.style.marginBottom="15px";const o=document.createElement("label");o.textContent=t.question,o.setAttribute("for",`field-${t.id}`),o.style.cssText=this.options.labelStyles,o.style.color=this.options.textColor,i.appendChild(o);let s;if("text"===t.answerType?(s=document.createElement("input")).type="text":"textarea"===t.answerType?s=document.createElement("textarea"):"number"===t.answerType?(s=document.createElement("input")).type="number":"email"===t.answerType&&(s=document.createElement("input")).type="email",s&&(s.id=t.question,s.name=t.question,s.style.cssText=`${this.options.inputStyles} border:1px solid ${this.options.designColor};color:${this.options.textColor};`,s.required=!0,i.appendChild(s)),"radio"===t.answerType||"checkbox"===t.answerType){const e=document.createElement("div");e.style.display="flex",e.style.flexWrap="wrap",e.style.gap="10px",t.options.forEach((o,s)=>{const n=document.createElement("div");n.style.display="flex",n.style.alignItems="center";const a=document.createElement("input");a.type=t.answerType,a.name="radio"===t.answerType?t.question:`${t.question}-${s}`,a.value=o,a.style.marginRight="5px",a.style.marginBottom="10px",a.style.accentColor=this.options.designColor;const r=document.createElement("label");r.textContent=o,r.style.color=this.options.textColor,n.appendChild(a),n.appendChild(r),e.appendChild(n)}),i.appendChild(e)}e.appendChild(i)});const i=document.createElement("button");i.type="submit",i.textContent="Submit",i.style.cssText=`${this.options.buttonStyles} background-color: ${this.options.designColor};`,i.addEventListener("mouseover",()=>{i.style.backgroundColor=this._adjustBrightness(this.options.designColor,-30)}),i.addEventListener("mouseout",()=>{i.style.backgroundColor=this.options.designColor}),e.addEventListener("submit",async t=>{t.preventDefault();const i=new FormData(e),o={},s=Array.from(i.entries()).every(([t,e])=>{const i=document.getElementById(t);return!!e.trim()||(i.style.borderColor="red",!1)});if(s)try{const t=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({form:JSON.stringify(o)})});alert(t.ok?"Form submitted successfully!":"Error submitting form")}catch(t){console.error("Error submitting form:",t)}else alert("Please fill in all required fields.")}),e.appendChild(i),this.container.appendChild(e)}_adjustBrightness(t,e){let i=parseInt(t.slice(1,3),16),o=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16);return i=Math.min(255,Math.max(0,i+i*e/100)),o=Math.min(255,Math.max(0,o+o*e/100)),s=Math.min(255,Math.max(0,s+s*e/100)),`rgb(${i},${o},${s})`}}
